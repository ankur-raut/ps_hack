
const data = [
    {
        id:"1",
        question:"",
        src:"../img/full/1.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"1"
    }
    ,{
        
        id:"2",
        question:"",
        src:"../img/full/2.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"2"
    },
    {
        id:"3",
        question:"",
        src:"../img/full/3.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"3"
    },
    {
        id:"4",
        question:"",
        src:"../img/full/4.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"1"
    },{
        id:"5",
        question:"",
        src:"../img/full/5.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"3"
    },{
        id:"6",
        question:"",
        src:"../img/full/6.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"2"
    },{
        id:"7",
        question:"",
        src:"../img/full/7.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"3"
    },{
        id:"8",
        question:"",
        src:"../img/full/8.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"1"
    },{
        id:"9",
        question:"109)The parametric equations of a parabola are x = t^2 + 1, y=2t + 1.The cartesian equation of its directrix is",
        src:"",
        option1:"x + 1 = 0",
        option2:"y = 0",
        option3:"x = 0",
        option4:"y + 1 = 0",
        ansid:"3"
    },{
        id:"10",
        question:"",
        src:"../img/full/10.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"2"
    },{
        id:"11",
        question:"",
        src:"../img/full/11.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"4"
    },{
        id:"12",
        question:"",
        src:"../img/full/12.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"3"
    },{
        id:"13",
        question:"",
        src:"../img/full/13.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"1"
    },{
        id:"14",
        question:``,
        src:"../img/full/14.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"1"
    },{
        id:"15",
        question:"",
        src:"../img/full/15.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"2"
    },{
        id:"16",
        question:"",
        src:"../img/full/16.png",
        option1:"(α − β)/200",
        option2:"α − β",
        option3:"(α − β)/100",
        option4:"β − α",
        ansid:"3"
    },{
        id:"17",
        question:"",
        src:"../img/full/17.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"1"
    },{
        id:"18",
        question:"",
        src:"../img/full/18.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"3"
    },{
        id:"19",
        question:"",
        src:"../img/full/19.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"3"
    },{
        id:"20",
        question:"",
        src:"../img/full/20.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"1"
    },{
        id:"21",
        question:"",
        src:"../img/full/21.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"1"
    },{
        id:"22",
        question:"",
        src:"../img/full/22.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"1"
    },{
        id:"23",
        question:"123)Joint equation of two lines, through (x1, y1), perpendicular to two lines ax^2 + 2hxy + by^2 = 0 , is",
        src:"../img/full/23.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"2"
    },{
        id:"24",
        question:"",
        src:"../img/full/24.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"3"
    },{
        id:"25",
        question:"",
        src:"../img/full/25.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"1"
    },{
        id:"26",
        question:"",
            src:"../img/full/Screenshot_49.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"4"
    },
    {
        id:"27",
        question:"",
            src:"../img/full/Screenshot_50.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"3"
    },
    {
        id:"28",
        question:"",
            src:"../img/full/Screenshot_51.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"1"
    },
    {
        id:"29",
        question:"",
            src:"../img/full/Screenshot_52.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"3"
    },
    {
        id:"30",
        question:"",
            src:"../img/full/Screenshot_53.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"1"
    },
    {
        id:"31",
        question:"",
            src:"../img/full/Screenshot_54.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"3"
    },
    {
        id:"32",
        question:"",
            src:"../img/full/Screenshot_55.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"4"
    },
    {
        id:"33",
        question:"",
            src:"../img/full/Screenshot_56.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"1"
    },
    {
        id:"34",
        question:"",
            src:"../img/full/Screenshot_57.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"4"
    },
    {
        id:"35",
        question:"",
            src:"../img/full/Screenshot_58.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"1"
    },
    {
        id:"36",
        question:"",
            src:"../img/full/Screenshot_59.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"4"
    },
    {
        id:"37",
        question:"",
            src:"../img/full/Screenshot_60.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"2"
    },
    {
        id:"38",
        question:"",
            src:"../img/full/Screenshot_61.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"3"
    },
    {
        id:"39",
        question:"",
            src:"../img/full/Screenshot_62.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"2"
    },
    {
        id:"40",
        question:"",
            src:"../img/full/Screenshot_63.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"1"
    },
    {
        id:"41",
        question:"",
            src:"../img/full/Screenshot_64.png",
            option1:"A",
            option2:"B",
            option3:"C",
            option4:"D",
            ansid:"4"
    },
    {
        id:"42",
        question:"",
        src:"../img/full/Screenshot_65.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"2"
    },
    {
        id:"43",
        question:"",
        src:"../img/full/Screenshot_66.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"3"
    },
    {
        id:"44",
        question:"",
        src:"../img/full/Screenshot_67.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"1"
    },
    {
        id:"45",
        question:"",
        src:"../img/full/Screenshot_68.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"4"
    },
    {
        id:"46",
        question:"",
        src:"../img/full/Screenshot_69.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"4"
    },
    {
        id:"47",
        question:"",
        src:"../img/full/Screenshot_70.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"1"
    },
    {
        id:"48",
        question:"",
        src:"../img/full/Screenshot_71.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"2"
    },
    {
        id:"49",
        question:"",
        src:"../img/full/Screenshot_72.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"3"
    },
    {
        id:"50",
        question:"",
        src:"../img/full/Screenshot_73.png",
        option1:"A",
        option2:"B",
        option3:"C",
        option4:"D",
        ansid:"3"
    },
    {
        id:"51",
        question:"you can submit your test!",
        src:"",
        option1:" ",
        option2:" ",
        option3:" ",
        option4:"",
        ansid:"5"
    }

    ];
    
    const no = document.querySelector(".no");
    const question = document.querySelector('.question');
    const img = document.querySelector('img')
    const option1 = document.getElementById('option1');
    const option2 = document.getElementById('option2');
    const option3 = document.getElementById('option3');
    const option4 = document.getElementById('option4');
    const disans = document.querySelector('.disans');
    
    
    const submit = document.querySelector('.submitbtn');
    const submitexambtn = document.querySelector('.submitexambtn')
    // console.log(submitexambtn)
    // console.log(submit)
    
    
    
    
    const popup = document.querySelector(".modalcontainer");
    // console.log(screen.width)
    if(screen.width < 600){
    // console.log("yess got it")
    popup.classList.add("demo");
    popup.classList.remove("modalcontainer");
    
    }else{
    // console.log("no got it")
    popup.classList.add("modalcontainer");
    popup.classList.remove("demo");
    }
    
    
    const input = document.querySelectorAll(".input")
    
    let mycurrentque = {};
    let currenttime = 0 ;
    // let mycurrentscore= {}
    score = 0;
    window.addEventListener("DOMContentLoaded",()=>{
    showquestion(currenttime);
    
    })
    
    function disabledbutton(currentpara){
    console.log("cur value " + currentpara)
    if(Number.isNaN(currentpara)){
        currentpara = 0 ;  
    }
    let buttoncircle =  document.getElementById(currentpara-1) ;
     buttoncircle.disabled = true;
    //  console.log("dis")
    //  console.log(buttoncircle)
    //    console.log("button" + buttoncircle)
    //    console.log("current id " + currentpara)
    }
    
    function showquestion(currenttime){
    
    if(mycurrentque.currenttime >= 50){
        mycurrentque.currenttime = 0;
    } 
    
    //    console.log("question " + currenttime)
    const item = data[currenttime];
    no.textContent = item.id;
    question.textContent = item.question;
    img.src = item.src;
    console.log(img.src);
    option1.textContent = item.option1;
    option2.textContent = item.option2;
    option3.textContent = item.option3;
    option4.textContent = item.option4;
   if(disans){
    disans.textContent= item.ansid;
   }
    document.getElementsByTagName("button")[0].tag = item.id;
    console.log(item.id)
    mycurrentque.currenttime = item.id;
    // console.log("question" +currenttime)
    // console.log(document.getElementsByTagName("button")[0].tag)
    // random(currenttime)
    deleselectall();
    }
    
    function fungetidofButton(id){ 
    showquestion(id)
    }
    
    submit.addEventListener("click",()=>{
    
       
        // console.log("button")
       
        // console.log(mycurrentque.currenttime > 25)
        // console.log("after submit" + mycurrentque.currenttime);
        //  currenttime = 10
        colorcircle(mycurrentque.currenttime-1);
        getcheckanswer(mycurrentque.currenttime);
    
        disabledbutton(mycurrentque.currenttime);
        // currenttime++;
        deleselectall();
    
        // if(mycurrentque.currenttime >= data.length){
        //     popup();
        // }
        // else{
            // if(mycurrentque.currenttime > 25){
            //     mycurrentque.currenttime = 0;
            // }
            // console.log("updated " + mycurrentque.currenttime)
            showquestion(mycurrentque.currenttime);
        // }
     });
    
    
    submitexambtn.addEventListener("click",()=>{
        const modal = document.querySelector(".modal-overlay");
        modal.classList.add("open-modal")
    
        const marks = document.querySelector(".marks");
        const suggetion = document.querySelector(".suggetion");
    
        if(window.score == 25){
            suggetion.textContent = "Excellet score";
        }else if(window.score >= 10){
            suggetion.textContent = "good score";
        }else{
            suggetion.textContent = "bad score";
        }
        marks.textContent = window.score;
        // console.log(window.score == 0)
        
    });
    
    function getcheckanswer(cur){
    let ans ;
    // console.log("Question  :-"+cur)
    input.forEach((current)=>{
        if(current.checked){
            ans = -current.id;
            // console.log("ans " + ans);
            // saveFile1(ans,cur);
        }
    })
    // if(document.getElementById('1').checked){
    //         ans = 1;
    //         console.log("SelOPtion " + ans);
    //         saveFile1(ans);
    // }
    // else if(document.getElementById('2').checked){
    //     ans = 2;
    //     console.log("SelOPtion " + ans);
    //     saveFile1(ans);
    // }
    // else if(document.getElementById('3').checked){
    //     ans = 3;
    //     console.log("SelOPtion " + ans);
    //     saveFile1(ans);
    // }
    // else if(document.getElementById('4').checked){
    //     ans = 4;
    //     console.log("SelOPtion " + ans);
    //     saveFile1(ans);
    // }
    
    // console.log("correct ans  " + data[cur-1].ansid)
    if(ans == data[cur-1].ansid){
       window.score = window.score +2 ;
    //    console.log("your ans  " + ans)
    
        // console.log("your score  " + window.score)
     }
        //  console.log(cur)
    
    };
    
    function end(){
    var marks = sessionStorage.getItem("chemphyscore")    
    var m =  parseInt(marks) + parseInt(score);
    console.log("total marks :" + m);
    sessionStorage.setItem("score",m);
    sessionStorage.setItem("total", parseInt(data.length)+100 );
    // console.log("data array lenght" +v )
    }
    
    function saveFile1(ans){
    // console.log(ans);
    
    // console.log("clickedSave");
    // const name = document.getElementById("txtName");
    // const rad = document.getElementById(ans);
    // const que = document.getElementById(cur);
    // const radio = document.getElementById(ans);
    // console.log("saveCur"+mycurrentque.currenttime);
    // 
    
    // console.log(data[mycurrentque.currenttime].ansid) 
    let data1='\r No.:'+mycurrentque.currenttime + ' \r\n '+ '\r que:'+data[mycurrentque.currenttime-1].question + 
    '\r\n Option1:'+data[mycurrentque.currenttime-1].option1+
    '\r\n Option2:'+data[mycurrentque.currenttime-1].option2+
    '\r\n Option3:'+data[mycurrentque.currenttime-1].option3+
    '\r\n Option4:'+data[mycurrentque.currenttime-1].option4+
    '\n Selected Option: ' + ans +
    '\r\nCorrect Answer: '+data[mycurrentque.currenttime-1].ansid;

    const textToBLOB = new Blob([data1], { type: 'text/plain' });
    const sFileName = mycurrentque.currenttime+'.txt';	
    let newLink = document.createElement("a");
    newLink.download = sFileName;
    if (window.webkitURL != null) {
        newLink.href = window.webkitURL.createObjectURL(textToBLOB);
    }
    else {
        newLink.href = window.URL.createObjectURL(textToBLOB);
        newLink.style.display = "none";
        document.body.appendChild(newLink);
    }
    newLink.click(); 
    
    // console.log("data="+data1);
    }
    // function saveFile(){
      
    // // Get the data from each element on the form.
    // const name = document.getElementById('txtName');
    // const age = document.getElementById('txtAge');
    // const email = document.getElementById('txtEmail');
    // const country = document.getElementById('selCountry');
    // const msg = document.getElementById('msg');
    
    // // This variable stores all the data.
    // let data = 
    //     '\r Name: ' + name.value + ' \r\n ' + 
    //     'Age: ' +age.value + ' \r\n ' + 
    //     'Email: ' + email.value + ' \r\n ' + 
    //     'Country: ' + country.value + ' \r\n ' + 
    //     'Message: ' + msg.value;
    
    // // Convert the text to BLOB.
    // const textToBLOB = new Blob([data], { type: 'text/plain' });
    // const sFileName = 'formData.txt';	   // The file to save the data.
    
    // let newLink = document.createElement("a");
    // newLink.download = sFileName;
    
    // if (window.webkitURL != null) {
    //     newLink.href = window.webkitURL.createObjectURL(textToBLOB);
    // }
    // else {
    //     newLink.href = window.URL.createObjectURL(textToBLOB);
    //     newLink.style.display = "none";
    //     document.body.appendChild(newLink);
    // }
    
    // newLink.click(); 
    // }
    // function saveFile(){
    // // Get the data from each element on the form.
    // // console.log("savefile " + ans);
    // const name = document.getElementById("txtName");
    // // console.log("savefile " + txtName);
    // const age = document.getElementById("txtAge");
    // const email = document.getElementById("txtEmail");
    // const country = document.getElementById("selCountry");
    // const msg = document.getElementById("msg");
    // const radio = document.getElementById(ans);
    
    // // This variable stores all the data.
    // let data = "\r radio: " + radio.value + "\r Name: " + name.value + " \r\n " + "Age: " + age.value + " \r\n " + "Email: " + email.value + " \r\n " + "Country: " + country.value + " \r\n " + "Message: " + msg.value;
    // // console.log(data); //printing form data into the console
    // // Convert the text to BLOB.
    // const textToBLOB = new Blob([data], { type: "text/plain" });
    // var filename = new Date();
    // var month =new Date(); //months from 1-12
    // month = month.getMonth();
    
    // var day = new Date();
    // var day = day.getUTCDate();
    
    // var year = new Date();
    // var year = year.getUTCFullYear();
    
    // newdate = year + "/" + month + "/" + day;
    // const sFileName = filename; // The file to save the data.
    
    // let newLink = document.createElement("a");
    // newLink.download = new Date();
    
    // if (window.webkitURL != null) {
    //     newLink.href = window.webkitURL.createObjectURL(textToBLOB);
    // } else {
    //     newLink.href = window.URL.createObjectURL(textToBLOB);
    //     newLink.style.display = "none";
    //     document.body.appendChild(newLink);
    // }
    
    // newLink.click();
    // }; 
    
    
    const deleselectall =()=>{
    input.forEach((current) => {
        current.checked = false;
    });
    };
    
    // var score=0;
    // function random(currenttime){
    //     submit.addEventListener("click",()=>{
    //         console.log(currenttime);
    //        //  currenttime = 10
    //        console.log("no"+currenttime)
    //        let circle = document.querySelector(".no"+currenttime);
    //        // console.log(circle)
    //        circle.style.background = "rgb(12, 236, 12)";
    //        let checkans = getcheckanswer();
    //        if(checkans === data[currenttime].ansid){
    //           score++;
    //        }
    //     //    currenttime++;
    //        deleselectall();
    //        if(currenttime >= data.length){
    //            const modal = document.querySelector(".modal-overlay");
    //            modal.classList.add("open-modal")
    
    //            const marks = document.querySelector(".marks");
    //            const suggetion = document.querySelector(".suggetion");
    
    //            if(score == 25){
    //                suggetion.textContent = "Excellet score";
    //            }else if(score >= 10){
    //                suggetion.textContent = "good score";
    //            }else{
    //                suggetion.textContent = "bad Score";
    //            }
    //            marks.textContent = score;
    //            console.log(score);
    //        }
    //        else{
    //            showquestion(currenttime);
    //        }
    //     });
    // }
    
    function colorcircle(currenttime){
    // console.log("no"+currenttime)
    let circle = document.querySelector(".no"+currenttime);
    // console.log(circle)
    circle.style.background = "rgb(12, 236, 12)";
    }
    
    function popupfunc(){
    
        const modal = document.querySelector(".modal-overlay");
        modal.classList.add("open-modal")
    
        const marks = document.querySelector(".marks");
        const suggetion = document.querySelector(".suggetion");
    
        if(score == 25){
            suggetion.textContent = "Excellet score";
        }else if(score >= 10){
            suggetion.textContent = "good score";
        }else{
            suggetion.textContent = "bad Score";
        }
        marks.textContent = score;
        // console.log(score);
    
    }
    
    
    //  submit.addEventListener("click",()=>{
    //     console.log(currenttime);
    //     //  currenttime = 10
    //     colorcircle(currenttime);
    //     getcheckanswer();
    //     // currenttime++;
    //     deleselectall();
    
    //     if(currenttime >= data.length){
    //         popup();
    //     }
    //     else{
    //         showquestion(currenttime);
    //     }
    //  });
    
    
    
    var count = 30;
    let sec = 60;
    var interval = setInterval(function(){
    let time = Math.trunc(count / 60);
    
    document.getElementById('count').innerHTML="Time Left :- "+time+" : "+sec;
    count--;
    if(sec === 0){
      sec = 60;
    }
    else{
    sec--;
    }
    
    if (count === 0){
    // const modal = document.querySelector(".modal-overlay");
    //     modal.classList.add("open-modal")
    
    //     const marks = document.querySelector(".marks");
    //     const suggetion = document.querySelector(".suggetion");
    
    //     if(mycurrentque.score == 100){
    //         suggetion.textContent = "Excellet score";
    //     }else if(mycurrentque.score >= 90){
    //         suggetion.textContent = "good score";
    //     }else{
    //         suggetion.textContent = "bad Score";
    //     }
    //     marks.textContent = mycurrentque.score;
        // console.log(mycurrentque.score);
        clearInterval(interval);
        end();
        window.location.href = "/test/result.html";
    }
    }, 1000);